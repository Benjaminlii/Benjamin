# 多功能报警器接口

------

[TOC]

------

## 服务器ip地址

http://49.228.235.156:8080/alarm/(云)

http://192.168.1.126:8080/alarm/(本机)

## 1. 登录

### (1). url

​		/login

### (2). 参数

| 参数名   | 参数类型 | 意义             |
| -------- | -------- | ---------------- |
| phone    | String   | 登录使用的手机号 |
| password | String   | 用户密码         |
|          |          |                  |

### (3). 返回值

| 返回值名     | 类型   | 意义                                           |
| ------------ | ------ | ---------------------------------------------- |
| code         | String | 成功为success,失败为error                      |
| errorMessage | String | 如果调用失败,会有这个字段,是调用失败的提示信息 |
|              |        |                                                |

实例

```JSON
// 调用成功
{
    "code": "success"
}

//调用失败
{
    "code": "error",
    "errorMessage": "手机号或密码不正确"
}
```

## 2. 注册验证码

### (1). url

​		sendRegisterSSM

### (2). 参数

| 参数名 | 参数类型 | 意义             |
| ------ | -------- | ---------------- |
| phone  | String   | 登录使用的手机号 |
|        |          |                  |
|        |          |                  |

### (3). 返回值

| 返回值名     | 类型   | 意义                                           |
| ------------ | ------ | ---------------------------------------------- |
| code         | String | 成功为success,失败为error                      |
| errorMessage | String | 如果调用失败,会有这个字段,是调用失败的提示信息 |
|              |        |                                                |

实例

```JSON
// 调用成功
{
    "code": "success"
}

//调用失败
{
    "code": "error",
    "errorMessage": "短信接口调用出错"
}
```



## 3. 注册

​		(手机号短信验证,手机号 密码)

### (1). url:

​		/register

### (2). 参数

| 参数名   | 参数类型 | 意义                   |
| -------- | -------- | ---------------------- |
| phone    | String   | 登录使用的手机号       |
| password | String   | 用户密码               |
| verCode  | String   | 验证手机号发送的验证码 |

### (3). 返回值

| 返回值名     | 类型   | 意义                                           |
| ------------ | ------ | ---------------------------------------------- |
| code         | String | 成功为success,失败为error                      |
| errorMessage | String | 如果调用失败,会有这个字段,是调用失败的提示信息 |
|              |        |                                                |

实例

```JSON
// 调用成功
{
    "code": "success"
}

//调用失败
{
    "code": "error",
    "errorMessage": "验证码不正确"
}
```

## 4. 发送紧急联系人验证短信

### (1). url:

​		sendVerMessage

### (2). 参数

| 参数名    | 参数类型 | 意义                       |
| --------- | -------- | -------------------------- |
| callPhone | String   | 当前用户要添加的紧急联系人 |
|           |          |                            |
|           |          |                            |

### (3). 返回值

| 返回值名     | 类型   | 意义                                           |
| ------------ | ------ | ---------------------------------------------- |
| code         | String | 成功为success,失败为error                      |
| errorMessage | String | 如果调用失败,会有这个字段,是调用失败的提示信息 |
|              |        |                                                |

实例

```JSON
// 调用成功
{
    "code": "success"
}

//调用失败
{
    "code": "error",
    "errorMessage": "短信接口调用出错"
}
```



## 5. 添加联系人

​		得到地址,发给联系人,回复

### (1). url:

​		/addContact

### (2). 参数

| 参数名    | 参数类型 | 意义                               |
| --------- | -------- | ---------------------------------- |
| callPhone | String   | 该用户需要添加的紧急联系人手机号码 |
| verCode   | String   | 对应手机号收到的验证码             |
|           |          |                                    |

### (3). 返回值

| 返回值名     | 类型   | 意义                                           |
| ------------ | ------ | ---------------------------------------------- |
| code         | String | 成功为success,失败为error                      |
| errorMessage | String | 如果调用失败,会有这个字段,是调用失败的提示信息 |
|              |        |                                                |

实例

```JSON
// 调用成功
{
    "code": "success"
}

//调用失败
{
    "code": "error",
    "errorMessage": "验证码不正确"
}
```

## 6. 获取联系人列表

### (1). url:

​		/getContacts

### (2). 参数

​		无

### (3). 返回值

| 返回值名            | 类型      | 意义                                           |
| ------------------- | --------- | ---------------------------------------------- |
| code                | String    | 成功为success,失败为error                      |
| errorMessage        | String    | 如果调用失败,会有这个字段,是调用失败的提示信息 |
| date                | JSONArray | 获取的联系人信息组成的JSON数组                 |
| date[sub].cId       | int       | 联系人编号                                     |
| date[sub].userId    | int       | 对应的用户                                     |
| date[sub].callPhone | String    | 对应的联系人手机号码                           |

实例

```JSON
// 调用成功
{
    "code": "success",
    "data": [
        {
            "cId": 6,
            "userId": 1,
            "callPhone": "15129291548"
        },
        {
            "cId": 7,
            "userId": 1,
            "callPhone": "15991630732"
        }
    ]
}

//调用失败
{
    "code": "error",
    "errorMessage": "当前无登录状态"
}
```

## 7. 删除联系人

### (1). url:

​		/deleteContact

### (2). 参数

| 参数名    | 参数类型 | 意义                   |
| --------- | -------- | ---------------------- |
| callPhone | String   | 要删除的联系人手机号码 |
|           |          |                        |
|           |          |                        |

### (3). 返回值

| 返回值名     | 类型   | 意义                                           |
| ------------ | ------ | ---------------------------------------------- |
| code         | String | 成功为success,失败为error                      |
| errorMessage | String | 如果调用失败,会有这个字段,是调用失败的提示信息 |
|              |        |                                                |

实例

```JSON
// 调用成功
{
    "code": "success"
}

//调用失败
{
    "code": "error",
    "errorMessage": "当前无登录状态"
}
```



## 8. 报警短信

### (1). url:

​		/alarm

### (2). 参数

| 参数名  | 参数类型 | 意义                                             |
| ------- | -------- | ------------------------------------------------ |
| address | String   | 用户发起请求时的地理位置(要求长度不超过18个字符) |
|         |          |                                                  |
|         |          |                                                  |

### (3). 返回值

| 返回值名       | 类型   | 意义                                           |
| -------------- | ------ | ---------------------------------------------- |
| code           | String | 成功为success,失败为error                      |
| errorMessage   | String | 如果调用失败,会有这个字段,是调用失败的提示信息 |
| numOfCallPhone | int    | 联系人数量                                     |
| numOfSMS       | int    | 发送短信数量                                   |

实例

```JSON
// 调用成功
{
    "code": "success"
}

//调用失败
{
    "code": "error",
    "errorMessage": "当前无登录状态"
}

//短信部分发送
{
    "code": "error",
    "errorMessage": "部分发送信息",
    "numOfCallPhone":5,
    "numOfSMS": 3    
}
```



## 



## 数据库设计:

-   用户
    -   id
    -   手机号
    -   密码
-   联系人
    -   id
    -   用户id
    -   联系人手机号