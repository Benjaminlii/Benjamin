# 第3章 链表

------

[TOC]

-----

>   Redis使用的C语言没有内置链表的实现,所以Redis构建了自己的实现方式.
>
>   当list内存储了较多的元素或者list中包含的元素都是较长的字符串时,Redis就会使用链表作为列表的底层实现.

链表的数据结构实现略过.

## 1. 链表和链表节点的实现

```c
// 链表节点的定义
typedef struct listNode{
    // 前继节点
    struct listNode *prev;
    // 后继节点
    struct listNode *prev;
    // 指向节点存储的数据
    void *value;
}listNode;

// 链表的数据结构定义
typedef struct list{
    // 头结点
    listNode *head;
    // 尾节点
    listNode *tail;
    // 链表长度
    unsigned long len;
    // 复制链表节点的函数
    void *(*dup)(void *ptr);
    // 释放链表节点的函数
    void (*free)(void *ptr);
    // 节点值对比函数
    int (*match)(void *ptr, void *key);
}list;
```

>   void * 的用法相当于Java中的Object,可以保存所有类型的指针.

​		list中存储了链表的长度,所以可以O(1)时间复杂度获取数据量.