# 第三章 应用层

-----

[TOC]

-----

## 1. 概述

​		应用层对应用程序的通信提供服务.

应用层协议的定义:

-   应用进程交换的报文类型(请求还是响应)
-   各种报文类型的语法(各个字段的设置)
-   字段的语义(包含在各个字段中信息的含义)
-   进程何时,如何发送报文,以及如何响应

应用层的功能:

1.  文件传输,访问和管理
1.  电子邮件
1.  虚拟终端
1.  查询服务和远程作业登录

重要协议:

-   FTP
-   SMTP,POP3
-   HTTP
-   DNS

## 2. 网络应用模型

### (1). 客户服务器模型

​		服务器:提供计算服务的设备.其永久性的提供服务,并且有固定的访问地址

​		客户机:请求计算服务的主机.与服务器通信,使用服务器提供的服务.可以间歇性的接入网络,而不是一直在线.可能使用动态的IP地址.不与其他客户机直接通信.

#### (2). P2P模型

​		不存在永远在线的服务器,每台主机既可以提供服务,也可以请求服务.任意两端之间可以直接通讯.

​		可扩展性好,网络健壮性强

## 3. DNS系统

​		IP地址难以记忆,所以出现了域名来一对一的对IP地址进行映射.

​		在发送一个请求时,我们输入的是域名,然后与一台或多台DNS服务器进行访问,DNS服务器会将域名转化为对应主机的IP地址返回回来.然后我们的主机在使用得到的IP地址进行访问.

## 4. 万维网

### (1). 概述

​		万维网是一个大规模,联机式的信息储藏所,是无数个网络站点和网页的集合.

​		通过给每一个设置资源统一资源定位符URL来获取资源.

​		URL一般形式:<协议>://<主机>:<端口>/<路径>

​		URL不区分大小写.

​		用户通过HTTP(超文本传输)协议传送给使用者.

​		万维网使用客户服务器方式工作,客户程序是浏览器,资源所驻留的主机运行服务器程序(Tomcat等)

​		万维网使用HTML(超文本标记语言)展示资源,使用资源.

### (2). HTTP协议

​		HTTP协议规定了浏览器如何向服务器请求资源和服务器如何向浏览器发送资源.

​		服务器监听80端口,发现所有访问服务器的请求,一旦服务器监听到请求,并且成功建立连接,浏览器就可以发送HTTP请求报文,服务器接收到HTTP请求报文之后根据自身的逻辑准备资源,并将资源通过HTTP响应报文发送给客户端.最后释放TCP连接.

#### 1). HTTP的特点

-   无状态:用一个客户两次访问服务器时服务器的HTTP响应是没有区别的.
    -   通过cookie使得HTTP请求可以记录信息,是记录在用户主机中的文本文件
-   采用TCP协议作为传输层协议,但HTTP本身是无连接的

#### 2). HTTP的连接方式

-   持久连接(Keep-alive):会保持连接,后续的数据交换在当前连接的基础上继续传输数据.
    -   非流水线:每一次的请求发送必须在上一次的请求得到响应后才能进行
    -   流水线:一次可以发送多个请求报文,接收多个响应报文后进行分发匹配
-   非持久连接(Close):在第三次握手发送HTTP请求报文,然后的第一次确认中发送HTTP响应报文,然后断开连接

#### 3). HTTP报文结构

​		分为请求报文和响应报文.

​		HTTP报文是面向文本的,因此报文中每一个字段都是ASCII码串

![1574517235838](/home/benjamin/.config/Typora/typora-user-images/1574517235838.png)

方法就是该请求要对资源进行的操作(get,post等等)

版本是HTTP协议的版本

首部行(请求头,响应头)

响应报文中的状态码就是404,500,200那一堆东西:

-   1xx:通知信息,如请求正在处理等
-   2xx:请求成功
-   3xx:重定向
-   4xx:客户出现差错
-   5xx:服务器出现差错